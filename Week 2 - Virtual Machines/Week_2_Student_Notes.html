
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Week 2 Student Notes</title>
<script src="https://cdn.tailwindcss.com?plugins=typography"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                fontFamily: {
                    sans: ['Inter', 'sans-serif'],
                },
                colors: {
                    primary: '#002F6E', // VUT Midnight Blue
                    secondary: '#6c757d',
                    codebg: 'var(--bg-code)', 
                },
                typography: {
                    DEFAULT: {
                        css: {
                            maxWidth: '100%',
                            fontFamily: 'Inter, sans-serif',
                            color: 'var(--text-body)',
                            '--tw-prose-body': 'var(--text-body)',
                            '--tw-prose-headings': 'var(--text-headings)',
                            '--tw-prose-links': 'var(--text-link)',
                            '--tw-prose-bold': 'var(--text-headings)',
                            '--tw-prose-counters': 'var(--text-body)',
                            '--tw-prose-bullets': 'var(--text-body)',
                            '--tw-prose-hr': 'var(--border-color)',
                            '--tw-prose-quotes': 'var(--text-body)',
                            '--tw-prose-code': 'var(--text-code)',
                            '--tw-prose-pre-code': 'var(--text-pre)',
                            '--tw-prose-pre-bg': 'var(--bg-pre)',
                            
                            // Image Sizing Control
                            img: {
                                display: 'block',
                                marginLeft: 'auto',
                                marginRight: 'auto',
                                maxHeight: '500px',
                                width: 'auto',
                                height: 'auto',
                                borderRadius: '0.5rem',
                                boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                            },
                            // Links
                            a: {
                                color: 'var(--text-link)',
                                '&:hover': { opacity: '0.8' },
                            },
                            // Inline Code
                            code: {
                                color: 'var(--text-code)',
                                backgroundColor: 'var(--bg-code)',
                                padding: '0.2rem 0.4rem',
                                borderRadius: '0.25rem',
                                fontWeight: '600',
                                border: '1px solid var(--border-code)',
                            },
                            'code::before': { content: '""' },
                            'code::after': { content: '""' },
                            // Code Blocks (Pre)
                            pre: {
                                backgroundColor: 'var(--bg-pre) !important',
                                color: 'var(--text-pre)',
                                padding: '1rem',
                                borderRadius: '0.5rem',
                                border: '1px solid var(--border-pre)',
                            },
                            // Notes/Alerts (Blockquotes)
                            blockquote: {
                                borderLeftColor: '#002F6E',
                                borderLeftWidth: '4px',
                                backgroundColor: 'var(--bg-note)',
                                padding: '1rem',
                                color: 'var(--text-body)',
                                fontSize: '0.9rem', // Smaller text for notes
                                fontStyle: 'italic',
                                quotes: 'none',
                                borderRadius: '0 0.5rem 0.5rem 0',
                            },
                            'blockquote p:first-of-type::before': { content: 'none' },
                            'blockquote p:last-of-type::after': { content: 'none' },
                            // Tables (Restored from First Attempt)
                            table: {
                                width: '100%',
                                marginTop: '2em',
                                marginBottom: '2em',
                                borderCollapse: 'collapse',
                                fontSize: '0.9rem',
                            },
                            'thead th': {
                                backgroundColor: '#f3f4f6', 
                                color: '#1f2937', 
                                fontWeight: '600',
                                padding: '0.75rem',
                                borderBottom: '2px solid #e5e7eb',
                                textAlign: 'left',
                            },
                            'tbody td': {
                                padding: '0.75rem',
                                borderBottom: '1px solid #e5e7eb',
                                verticalAlign: 'top',
                            },
                            'tbody tr:hover': {
                                backgroundColor: '#f9fafb',
                            },
                            
                            // Task Lists (Checkboxes)
                            '.task-list-item': {
                                listStyleType: 'none',
                            },
                            '.task-list-item input[type="checkbox"]': {
                                marginRight: '0.5rem',
                            },

                            thead: {
                                borderBottomWidth: '2px',
                                borderBottomColor: 'var(--border-color)',
                            },
                            'thead th': {
                                color: 'var(--text-headings)',
                                fontWeight: '600',
                                verticalAlign: 'bottom',
                                paddingRight: '0.75em',
                                paddingBottom: '0.75em',
                                paddingLeft: '0.75em',
                                textAlign: 'left',
                            },
                            'tbody tr': {
                                borderBottomWidth: '1px',
                                borderBottomColor: 'var(--border-color)',
                            },
                            'tbody tr:last-child': {
                                borderBottomWidth: '0',
                            },
                            'tbody td': {
                                verticalAlign: 'top',
                                padding: '0.75em',
                            },
                        },
                    },
                },
            },
        },
    }
</script>
<script>
    // Theme Toggle Logic
    document.addEventListener('DOMContentLoaded', () => {
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        const iconSun = document.getElementById('icon-sun');
        const iconMoon = document.getElementById('icon-moon');

        // Check local storage or preference
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
            iconSun.classList.remove('hidden');
            iconMoon.classList.add('hidden');
        } else {
            html.classList.remove('dark');
            iconSun.classList.add('hidden');
            iconMoon.classList.remove('hidden');
        }

        themeToggle.addEventListener('click', () => {
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.theme = 'light';
                iconSun.classList.add('hidden');
                iconMoon.classList.remove('hidden');
            } else {
                html.classList.add('dark');
                localStorage.theme = 'dark';
                iconSun.classList.remove('hidden');
                iconMoon.classList.add('hidden');
            }
        });
    });
</script>
<style>
    /* CSS Variables for Theming */
    :root {
        --bg-body: #f8fafc;
        --bg-card: #ffffff;
        --text-body: #334155;
        --text-headings: #0f172a;
        --text-link: #002F6E; /* VUT Blue */
        --border-color: #e2e8f0;
        
        /* Code - Light Mode */
        --bg-code: #f1f5f9;
        --text-code: #d63384;
        --border-code: #e2e8f0;
        
        /* Pre - Light Mode (Github Light) */
        --bg-pre: #f6f8fa;
        --text-pre: #24292e;
        --border-pre: #d0d7de;
        
        /* Note - Light Mode */
        --bg-note: #f8f9fa;
        
        /* Scrollbar */
        --scroll-track: #f1f1f1;
        --scroll-thumb: #888;
    }

    html.dark {
        --bg-body: #0f172a;
        --bg-card: #1e293b;
        --text-body: #cbd5e1;
        --text-headings: #f8fafc;
        --text-link: #60a5fa; /* Blue 400 - Brighter for better contrast */
        --border-color: #334155;
        
        /* Code - Dark Mode */
        --bg-code: #334155;
        --text-code: #f472b6; 
        --border-code: #475569;
        
        /* Pre - Dark Mode (Monokai) */
        --bg-pre: #272822;
        --text-pre: #f8f8f2;
        --border-pre: #464539;
        
        /* Note - Dark Mode */
        --bg-note: #1e293b;
        --scroll-track: #1e293b;
        --scroll-thumb: #475569;
    }

    /* Transition */
    body, article, code, pre, blockquote {
        transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: var(--scroll-track); }
    ::-webkit-scrollbar-thumb { background: var(--scroll-thumb); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #555; }
    
    /* Syntax Highlighting - LIGHT MODE (GitHub Light Inspired) */
    .codehilite .hll { background-color: #ffffcc }
    .codehilite .c { color: #6a737d; font-style: italic } /* Comment */
    .codehilite .err { color: #f05240; background-color: #ffeaea } /* Error */
    .codehilite .k { color: #d73a49; font-weight: bold } /* Keyword */
    .codehilite .o { color: #d73a49; font-weight: bold } /* Operator */
    .codehilite .cm { color: #6a737d; font-style: italic } /* Comment.Multiline */
    .codehilite .cp { color: #6a737d; font-weight: bold } /* Comment.Preproc */
    .codehilite .c1 { color: #6a737d; font-style: italic } /* Comment.Single */
    .codehilite .cs { color: #6a737d; font-style: italic } /* Comment.Special */
    .codehilite .gd { color: #d73a49; background-color: #fdd } /* Generic.Deleted */
    .codehilite .ge { font-style: italic } /* Generic.Emph */
    .codehilite .gr { color: #aa0000 } /* Generic.Error */
    .codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
    .codehilite .gi { color: #00a000; background-color: #dfd } /* Generic.Inserted */
    .codehilite .go { color: #888888 } /* Generic.Output */
    .codehilite .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
    .codehilite .gs { font-weight: bold } /* Generic.Strong */
    .codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
    .codehilite .gt { color: #aa0000 } /* Generic.Traceback */
    .codehilite .kc { color: #005cc5; font-weight: bold } /* Keyword.Constant */
    .codehilite .kd { color: #d73a49; font-weight: bold } /* Keyword.Declaration */
    .codehilite .kn { color: #d73a49; font-weight: bold } /* Keyword.Namespace */
    .codehilite .kp { color: #d73a49 } /* Keyword.Pseudo */
    .codehilite .kr { color: #d73a49; font-weight: bold } /* Keyword.Reserved */
    .codehilite .kt { color: #445588; font-weight: bold } /* Keyword.Type */
    .codehilite .m { color: #005cc5 } /* Literal.Number */
    .codehilite .s { color: #032f62 } /* Literal.String */
    .codehilite .na { color: #22863a } /* Name.Attribute */
    .codehilite .nb { color: #005cc5 } /* Name.Builtin */
    .codehilite .nc { color: #6f42c1; font-weight: bold } /* Name.Class */
    .codehilite .no { color: #005cc5 } /* Name.Constant */
    .codehilite .nd { color: #6f42c1; font-weight: bold } /* Name.Decorator */
    .codehilite .ni { color: #800080 } /* Name.Entity */
    .codehilite .ne { color: #990000; font-weight: bold } /* Name.Exception */
    .codehilite .nf { color: #6f42c1; font-weight: bold } /* Name.Function */
    .codehilite .nl { color: #990000; font-weight: bold } /* Name.Label */
    .codehilite .nn { color: #6f42c1; font-weight: bold } /* Name.Namespace */
    .codehilite .nt { color: #22863a } /* Name.Tag */
    .codehilite .nv { color: #e36209 } /* Name.Variable */
    .codehilite .ow { color: #d73a49; font-weight: bold } /* Operator.Word */
    .codehilite .w { color: #bbbbbb } /* Text.Whitespace */
    .codehilite .mf { color: #005cc5 } /* Literal.Number.Float */
    .codehilite .mh { color: #005cc5 } /* Literal.Number.Hex */
    .codehilite .mi { color: #005cc5 } /* Literal.Number.Integer */
    .codehilite .mo { color: #005cc5 } /* Literal.Number.Oct */
    .codehilite .sb { color: #032f62 } /* Literal.String.Backtick */
    .codehilite .sc { color: #032f62 } /* Literal.String.Char */
    .codehilite .sd { color: #032f62 } /* Literal.String.Doc */
    .codehilite .s2 { color: #032f62 } /* Literal.String.Double */
    .codehilite .se { color: #005cc5 } /* Literal.String.Escape */
    .codehilite .sh { color: #032f62 } /* Literal.String.Heredoc */
    .codehilite .si { color: #032f62 } /* Literal.String.Interpol */
    .codehilite .sx { color: #032f62 } /* Literal.String.Other */
    .codehilite .sr { color: #032f62 } /* Literal.String.Regex */
    .codehilite .s1 { color: #032f62 } /* Literal.String.Single */
    .codehilite .ss { color: #005cc5 } /* Literal.String.Symbol */
    .codehilite .bp { color: #005cc5 } /* Name.Builtin.Pseudo */
    .codehilite .vc { color: #e36209 } /* Name.Variable.Class */
    .codehilite .vg { color: #e36209 } /* Name.Variable.Global */
    .codehilite .vi { color: #e36209 } /* Name.Variable.Instance */
    .codehilite .il { color: #005cc5 } /* Literal.Number.Integer.Long */
    
    /* Syntax Highlighting - DARK MODE (Monokai Overrides) */
    html.dark .codehilite .hll { background-color: #49483e }
    html.dark .codehilite .c { color: #75715e } /* Comment */
    html.dark .codehilite .err { color: #960050; background-color: #1e0010 } /* Error */
    html.dark .codehilite .k { color: #66d9ef; font-weight: normal } /* Keyword */
    html.dark .codehilite .l { color: #ae81ff } /* Literal */
    html.dark .codehilite .n { color: #f8f8f2 } /* Name */
    html.dark .codehilite .o { color: #f92672; font-weight: normal } /* Operator */
    html.dark .codehilite .p { color: #f8f8f2 } /* Punctuation */
    html.dark .codehilite .cm { color: #75715e } /* Comment.Multiline */
    html.dark .codehilite .cp { color: #75715e } /* Comment.Preproc */
    html.dark .codehilite .c1 { color: #75715e } /* Comment.Single */
    html.dark .codehilite .cs { color: #75715e } /* Comment.Special */
    html.dark .codehilite .ge { font-style: italic } /* Generic.Emph */
    html.dark .codehilite .gs { font-weight: bold } /* Generic.Strong */
    html.dark .codehilite .kc { color: #66d9ef; font-weight: normal } /* Keyword.Constant */
    html.dark .codehilite .kd { color: #66d9ef; font-weight: normal  } /* Keyword.Declaration */
    html.dark .codehilite .kn { color: #f92672; font-weight: normal  } /* Keyword.Namespace */
    html.dark .codehilite .kp { color: #66d9ef; font-weight: normal  } /* Keyword.Pseudo */
    html.dark .codehilite .kr { color: #66d9ef; font-weight: normal  } /* Keyword.Reserved */
    html.dark .codehilite .kt { color: #66d9ef; font-weight: normal  } /* Keyword.Type */
    html.dark .codehilite .ld { color: #e6db74 } /* Literal.Date */
    html.dark .codehilite .m { color: #ae81ff } /* Literal.Number */
    html.dark .codehilite .s { color: #e6db74 } /* Literal.String */
    html.dark .codehilite .na { color: #a6e22e } /* Name.Attribute */
    html.dark .codehilite .nb { color: #f8f8f2 } /* Name.Builtin */
    html.dark .codehilite .nc { color: #a6e22e } /* Name.Class */
    html.dark .codehilite .no { color: #66d9ef } /* Name.Constant */
    html.dark .codehilite .nd { color: #a6e22e } /* Name.Decorator */
    html.dark .codehilite .ni { color: #f8f8f2 } /* Name.Entity */
    html.dark .codehilite .ne { color: #a6e22e } /* Name.Exception */
    html.dark .codehilite .nf { color: #a6e22e } /* Name.Function */
    html.dark .codehilite .nl { color: #f8f8f2 } /* Name.Label */
    html.dark .codehilite .nn { color: #f8f8f2 } /* Name.Namespace */
    html.dark .codehilite .nx { color: #a6e22e } /* Name.Other */
    html.dark .codehilite .py { color: #f8f8f2 } /* Name.Property */
    html.dark .codehilite .nt { color: #f92672 } /* Name.Tag */
    html.dark .codehilite .nv { color: #f8f8f2 } /* Name.Variable */
    html.dark .codehilite .ow { color: #f92672; font-weight: normal  } /* Operator.Word */
    html.dark .codehilite .w { color: #f8f8f2 } /* Text.Whitespace */
    html.dark .codehilite .mb { color: #ae81ff } /* Literal.Number.Bin */
    html.dark .codehilite .mf { color: #ae81ff } /* Literal.Number.Float */
    html.dark .codehilite .mh { color: #ae81ff } /* Literal.Number.Hex */
    html.dark .codehilite .mi { color: #ae81ff } /* Literal.Number.Integer */
    html.dark .codehilite .mo { color: #ae81ff } /* Literal.Number.Oct */
    html.dark .codehilite .sb { color: #e6db74 } /* Literal.String.Backtick */
    html.dark .codehilite .sc { color: #e6db74 } /* Literal.String.Char */
    html.dark .codehilite .sd { color: #e6db74 } /* Literal.String.Doc */
    html.dark .codehilite .s2 { color: #e6db74 } /* Literal.String.Double */
    html.dark .codehilite .se { color: #ae81ff } /* Literal.String.Escape */
    html.dark .codehilite .sh { color: #e6db74 } /* Literal.String.Heredoc */
    html.dark .codehilite .si { color: #e6db74 } /* Literal.String.Interpol */
    html.dark .codehilite .sx { color: #e6db74 } /* Literal.String.Other */
    html.dark .codehilite .sr { color: #e6db74 } /* Literal.String.Regex */
    html.dark .codehilite .s1 { color: #e6db74 } /* Literal.String.Single */
    html.dark .codehilite .ss { color: #ae81ff } /* Literal.String.Symbol */
</style>
<style>
        /* Glossary Tooltip Styles */
        .glossary-term {
            color: #c9984a;
            border-bottom: 2px dotted #c9984a;
            cursor: help;
            position: relative;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .glossary-term:hover {
            color: #ffffff;
            border-bottom-color: #ffffff;
        }
        
        .glossary-tooltip {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            z-index: 1000;
            background: linear-gradient(135deg, #1e3a5f 0%, #142a46 100%);
            color: #ffffff;
            padding: 12px 16px;
            border-radius: 8px;
            border: 2px solid #c9984a;
            font-size: 14px;
            line-height: 1.5;
            max-width: 300px;
            width: max-content;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            transition: opacity 0.3s, visibility 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .glossary-tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: #c9984a transparent transparent transparent;
        }
        
        .glossary-term:hover .glossary-tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        .glossary-icon {
            display: inline-block;
            margin-left: 4px;
            font-size: 0.8em;
            color: #c9984a;
        }
        </style><style>
        /* Glossary Tooltip Styles */
        .glossary-term {
            color: #c9984a;
            border-bottom: 2px dotted #c9984a;
            cursor: help;
            position: relative;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .glossary-term:hover {
            color: #ffffff;
            border-bottom-color: #ffffff;
        }
        
        .glossary-tooltip {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            z-index: 1000;
            background: linear-gradient(135deg, #1e3a5f 0%, #142a46 100%);
            color: #ffffff;
            padding: 12px 16px;
            border-radius: 8px;
            border: 2px solid #c9984a;
            font-size: 14px;
            line-height: 1.5;
            max-width: 300px;
            width: max-content;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            transition: opacity 0.3s, visibility 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .glossary-tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: #c9984a transparent transparent transparent;
        }
        
        .glossary-term:hover .glossary-tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        .glossary-icon {
            display: inline-block;
            margin-left: 4px;
            font-size: 0.8em;
            color: #c9984a;
        }
        </style><style>
        /* Glossary Tooltip Styles */
        .glossary-term {
            color: #c9984a;
            border-bottom: 2px dotted #c9984a;
            cursor: help;
            position: relative;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .glossary-term:hover {
            color: #ffffff;
            border-bottom-color: #ffffff;
        }
        
        .glossary-tooltip {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            z-index: 1000;
            background: linear-gradient(135deg, #1e3a5f 0%, #142a46 100%);
            color: #ffffff;
            padding: 12px 16px;
            border-radius: 8px;
            border: 2px solid #c9984a;
            font-size: 14px;
            line-height: 1.5;
            max-width: 300px;
            width: max-content;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            transition: opacity 0.3s, visibility 0.3s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .glossary-tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: #c9984a transparent transparent transparent;
        }
        
        .glossary-term:hover .glossary-tooltip {
            visibility: visible;
            opacity: 1;
        }
        </style></head>
<body class="bg-[var(--bg-body)] text-[var(--text-body)] pt-20 transition-colors duration-300">
<!-- Navigation -->
<nav class="fixed top-0 left-0 right-0 bg-[var(--bg-card)]/90 backdrop-blur-md shadow-sm z-50 border-b border-[var(--border-color)] transition-colors duration-300">
<div class="container mx-auto px-4 max-w-5xl h-16 flex items-center justify-between">
<a class="flex items-center space-x-3 text-[var(--text-headings)] hover:text-blue-600 transition-colors no-underline" href="../index.html">
<img alt="VUT Logo" class="h-12 w-auto object-contain" src="../ops3_logo.png"/>
<div class="flex flex-col">
<span class="font-bold text-lg leading-tight tracking-tight text-primary dark:text-sky-400 hidden sm:block">Operating Systems 3</span>
<span class="text-xs text-slate-500 dark:text-slate-400 font-medium hidden sm:block">Virtualisation &amp; Cloud Technologies</span>
<span class="font-bold text-lg tracking-tight sm:hidden">OPS3</span>
</div>
</a>
<div class="flex items-center space-x-6">
<a class="text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-sky-400 transition-colors no-underline" href="../index.html">
                Course Home
            </a>
<!-- Theme Toggle Button -->
<button class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors" id="theme-toggle">
<!-- Sun Icon -->
<svg class="w-5 h-5 text-yellow-500 hidden" fill="none" id="icon-sun" stroke="currentColor" viewbox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>
<!-- Moon Icon -->
<svg class="w-5 h-5 text-slate-500" fill="none" id="icon-moon" stroke="currentColor" viewbox="0 0 24 24"><path d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>
</button>
</div>
</div>
</nav>
<!-- Main Content -->
<main class="container mx-auto px-4 max-w-5xl mb-12">
<article class="prose lg:prose-lg max-w-none bg-[var(--bg-card)] p-6 md:p-12 rounded-xl shadow-sm border border-[var(--border-color)] transition-colors duration-300">
<p><a href="../index.html">← Back to Course Index</a></p>
<div class="flex items-stretch bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm mb-8 overflow-hidden">
<div class="w-40 flex-shrink-0 flex items-center justify-center bg-white dark:bg-gray-900">
<img alt="Virtual Machines Icon" class="h-full w-full object-cover" src="images/week_2_icon.png"/>
</div>
<div class="flex-1 flex flex-col items-center justify-center p-6">
<h1 class="text-2xl font-bold text-primary dark:text-sky-400 m-0 text-center">Virtual Machines (VMs)</h1>
<span class="text-lg font-medium text-gray-500 dark:text-gray-400 mt-1">Student Notes</span>
</div>
</div>
<p><strong>Course</strong>: Computer Systems Engineering
<strong>Module</strong>: Operating Systems 3 (Virtualisation &amp; Cloud Technologies)
<strong>Topic</strong>: Virtual Machines (VMs)
<strong>Estimated Reading Time</strong>: 30 Minutes</p>
<blockquote>
<p>[!TIP]
<strong>How to succeed in this week</strong>:
VMs are the building blocks of infrastructure. Pay close attention to the lifecycle operations (create, configure, <a class="glossary-term" href="glossary.html#Snapshot">snapshot<span class="glossary-tooltip">Point-in-time copy of <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> state for rollback 📖</span><span class="glossary-icon">📚</span></a>, <a class="glossary-term" href="glossary.html#Clone">clone<span class="glossary-tooltip">An exact copy of a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>). These patterns repeat in every cloud platform you'll encounter. Practice the <a class="glossary-term" href="glossary.html#CLI">CLI<span class="glossary-tooltip">Command Line Interface 📖</span><span class="glossary-icon">📚</span></a> commands—they're faster than the GUI.</p>
</blockquote>
<hr/>
<h2 id="welcome-to-week-2">Welcome to Week 2!</h2>
<p>Having established the theoretical foundations of <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>, we now shift our focus to heavy technical implementation. This week is a deep dive into the specific technologies that power modern open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>: <strong><a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a></strong> (the engine), <strong><a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a></strong> (the emulator), and <strong><a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE</strong> (the platform).</p>
<p>We will deconstruct their compositions, explore their specific functions, and master their configurations. By the end of this week, you will move beyond theory to practice, demonstrating the ability to deploy virtual machines manually using <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> commands and efficiently managing them via the <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> interface.</p>
<hr/>
<h2 id="what-youll-learn-this-week">What You'll Learn This Week</h2>
<ul>
<li>Create and configure virtual machines</li>
<li>Understand CPU, RAM, and disk allocation strategies</li>
<li>Install operating systems inside VMs</li>
<li>Utilize the <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> Guest Agent</li>
<li>Perform cloning, snapshots, and other <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> management tasks</li>
</ul>
<hr/>
<h2 id="1-deep-dive-linux-virtualization-kvm-qemu">1. Deep Dive: Linux <a class="glossary-term" href="glossary.html#Virtualization">Virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> (<a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> &amp; <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>)</h2>
<p>Modern open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> relies on two pillars: <strong><a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a></strong> (The Engine) and <strong><a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a></strong> (The Hardware). Understanding how they interact is the key to mastering Linux <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>, as these form the foundation upon which many enterprise platforms are built.</p>
<h3 id="11-the-engine-kvm-kernel-based-virtual-machine">1.1 The Engine: <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> (Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>)</h3>
<p>The Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> (<a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a>) is implemented as a loadable kernel module (<code>kvm.ko</code>) that transforms the Linux kernel into a Type-1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>. Unlike traditional hypervisors that run as a separate software layer, <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> leverages the kernel's existing process scheduling, memory management, and I/O stack. It exposes a character device, <code>/dev/kvm</code>, which user-space processes (like <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>) interact with via <code>ioctl()</code> system calls to create and run virtual machines.</p>
<p><strong>The <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> Execution Loop (ioctl Interface)</strong>:
The interaction between User Mode (the <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> process) and Guest Mode (the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> code) is handled via a blocking system call known as <code>KVM_RUN</code>. The process begins with <strong>Setup</strong>, where <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> opens the <code>/dev/kvm</code> device node, issues the <code>KVM_CREATE_VM</code> call to initialize the virtual environment, and maps the necessary memory for the guest. Once initialized, the <strong>Execution</strong> phase begins: <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> invokes the <code>KVM_RUN</code> ioctl, signaling the kernel to context-switch the CPU into <strong>Guest Mode</strong> (Ring -1 or VMX Root Operation).</p>
<p>In this mode, the <a class="glossary-term" href="glossary.html#vCPU">vCPU<span class="glossary-tooltip">Virtual CPU - Portion of physical CPU allocated to a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> executes instructions directly on the silicon at native speed ("Direct Execution"). This continues until the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> attempts a privileged operation, such as writing to a hardware register or accessing restricted memory, which triggers a <strong><a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> Exit</strong>. The hardware forces the CPU back into Host Kernel Mode, where <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> analyzes the exit reason. If the exit is "Lightweight" (e.g., a simple timer interrupt or paging request), <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> handles it internally and immediately re-enters the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>. However, if the exit is "Heavyweight" (requiring complex I/O like disk writes), <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> returns control to the <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> user-space process. <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> then performs the necessary <strong>Emulation</strong> for the I/O operation and calls <code>KVM_RUN</code> again to resume execution, completing the loop.</p>
<p><img alt="KVM Execution Loop" src="images/kvm_execution_loop.png"/>
<em>Figure 1.2: The Cycle of Direct Execution and Trapped Emulation.</em></p>
<p><strong>Code Snippet: Creating a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> via <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> <a class="glossary-term" href="glossary.html#API">API<span class="glossary-tooltip">Application Programming Interface 📖</span><span class="glossary-icon">📚</span></a> (C)</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1">// simplified example of creating a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> in C using the <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> <a class="glossary-term" href="glossary.html#API">API<span class="glossary-tooltip">Application Programming Interface 📖</span><span class="glossary-icon">📚</span></a></span>
<span class="kt">int</span><span class="w"> </span><span class="n"><a class="glossary-term" href="glossary.html#KVM">kvm<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a></span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="s">"/dev/<a class="glossary-term" href="glossary.html#KVM">kvm<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a>"</span><span class="p">,</span><span class="w"> </span><span class="n">O_RDWR</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">O_CLOEXEC</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="n">vmfd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n"><a class="glossary-term" href="glossary.html#KVM">kvm<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a></span><span class="p">,</span><span class="w"> </span><span class="n">KVM_CREATE_VM</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="c1">// Map 1GB of memory for the guest</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mmap</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="n">PROT_READ</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PROT_WRITE</span><span class="p">,</span><span class="w"> </span><span class="n">MAP_PRIVATE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">MAP_ANONYMOUS</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">kvm_userspace_memory_region</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">slot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">guest_phys_addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">memory_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">    </span><span class="p">.</span><span class="n">userspace_addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint64_t</span><span class="p">)</span><span class="n">mem</span><span class="p">,</span>
<span class="p">};</span>
<span class="n">ioctl</span><span class="p">(</span><span class="n">vmfd</span><span class="p">,</span><span class="w"> </span><span class="n">KVM_SET_USER_MEMORY_REGION</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">region</span><span class="p">);</span>
</code></pre></div>
<p><em>Figure 1.1: Simplified C code showing how a user-space program instructs the kernel to create a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>.</em></p>
<h3 id="12-advanced-kvm-technologies">1.2 Advanced <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> Technologies</h3>
<p>Modern <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> deployments leverage several advanced kernel features to maximize efficiency:</p>
<h4 id="121-ksm-kernel-samepage-merging">1.2.1 KSM (Kernel Samepage Merging)</h4>
<p>Kernel Samepage Merging (KSM) is a memory deduplication feature within the Linux kernel (stored in <code>mm/ksm.c</code>) that allows for high-density <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>. KSM utilizes a background kernel thread (<code>ksmd</code>) that periodically scans designated memory regions looking for pages with identical content. When matches are found, KSM merges these pages into a single physical page marked as Copy-on-Write (CoW). This allows multiple virtual machines running similar operating systems (e.g., ten instances of Windows Server) to share the same physical RAM for common libraries and kernel data. While this significantly increases density (memory overcommitment), it comes with a slight CPU overhead due to the scanning process.</p>
<h4 id="122-live-migration">1.2.2 <a class="glossary-term" href="glossary.html#Live-Migration">Live Migration<span class="glossary-tooltip">Moving a running <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> between hosts without downtime 📖</span><span class="glossary-icon">📚</span></a></h4>
<p><a class="glossary-term" href="glossary.html#Live-Migration">Live Migration<span class="glossary-tooltip">Moving a running <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> between hosts without downtime 📖</span><span class="glossary-icon">📚</span></a> is the capability to move a running <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> from one physical host to another with no perceptible downtime to the end-user. The process involves an iterative memory copy mechanism. First, the <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> copies the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>'s memory to the destination host while the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> continues to execute. As memory changes (becomes "dirty") during this copy, those dirty pages are tracked and re-sent in subsequent rounds. Once the remaining dirty pages are small enough to be transferred instantly, the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> is momentarily paused, the final state (CPU registers and remaining memory) is synced, and execution resumes on the new host.</p>
<h4 id="123-nested-virtualization">1.2.3 Nested <a class="glossary-term" href="glossary.html#Virtualization">Virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a></h4>
<p>Nested <a class="glossary-term" href="glossary.html#Virtualization">Virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> refers to the practice of running a <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> inside another <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>—effectively, a "<a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> inside a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>." This is achieved by forwarding hardware <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> extensions (Intel VT-x or AMD-V) from the host CPU through Level 0 (Host <a class="glossary-term" href="glossary.html#Hypervisor">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>) to Level 1 (Guest <a class="glossary-term" href="glossary.html#Hypervisor">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>). This is particularly useful for training environments, development labs, or testing cloud <a class="glossary-term" href="glossary.html#Orchestration">orchestration<span class="glossary-tooltip">Automated coordination of systems 📖</span><span class="glossary-icon">📚</span></a> platforms like <a class="glossary-term" href="glossary.html#OpenStack">OpenStack<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Cloud-Computing">cloud computing<span class="glossary-tooltip">Computing services delivered over the internet 📖</span><span class="glossary-icon">📚</span></a> platform 📖</span><span class="glossary-icon">📚</span></a> without requiring dedicated bare-metal hardware for every node.</p>
<h4 id="124-pci-passthrough-vfio">1.2.4 PCI Passthrough (VFIO)</h4>
<p>Standard <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> relies on <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> to emulate hardware devices, which introduces overhead due to the translation of instructions. For workloads requiring extreme performance—such as high-frequency trading, GPU-accelerated Machine Learning, or 100Gbps networking—emulation is insufficient. The Virtual Function I/O (VFIO) framework allows the host kernel to unbind a physical PCI device from the host drivers and pass it directly to the <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>. This gives the <a class="glossary-term" href="glossary.html#Guest-OS">guest OS<span class="glossary-tooltip">The operating system running inside a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> direct, exclusive access to the hardware, resulting in near-native performance, albeit at the cost of losing that device on the host system.</p>
<h4 id="125-memory-ballooning">1.2.5 Memory Ballooning</h4>
<p>Memory Ballooning is a dynamic memory management technique that allows the <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> to reclaim RAM from running virtual machines. It utilizes the <code>virtio-balloon</code> driver installed within the <a class="glossary-term" href="glossary.html#Guest-OS">guest OS<span class="glossary-tooltip">The operating system running inside a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>. When the host is under memory pressure, it instructs the balloon driver to "inflate," causing the guest kernel to allocate RAM to the driver. The driver then informs the host which physical pages it has claimed, allowing the host to safely repurpose those physical pages for other tasks. Conversely, when the guest needs more memory, the balloon "deflates," returning the pages to the guest's free pool.</p>
<h3 id="13-practical-verifying-kvm-support">1.3 Practical: Verifying <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> Support</h3>
<p>Before creating virtual machines, it is imperative to verify that the host system is correctly configured to support hardware-assisted <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>. This involves checking the CPU capabilities, kernel module status, and user permissions.</p>
<h4 id="131-verifying-hardware-virtualization-cpu-flags">1.3.1 Verifying Hardware <a class="glossary-term" href="glossary.html#Virtualization">Virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> (CPU Flags)</h4>
<p>The first step is to confirm that the physical processor supports the necessary <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> extensions (Intel VT-x or AMD-V) and that these extensions are enabled in the system BIOS/UEFI. In Linux, we verify this by inspecting the CPU flags via the <code>lscpu</code> command. We specifically filter for "<a class="glossary-term" href="glossary.html#Virtualization">Virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>" to see the vendor-specific technology.</p>
<div class="codehilite"><pre><span></span><code>lscpu<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Virtualization
<span class="c1"># Expected Output: VT-x (for Intel processors) or AMD-V (for AMD processors)</span>
</code></pre></div>
<p>If this command returns no output, it indicates that hardware <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> is disabled at the firmware level. You must reboot the machine, enter the BIOS setup, and enable "<a class="glossary-term" href="glossary.html#Virtualization">Virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> Technology" (often labeled as VT-x, Vanderpool, or SVM).</p>
<h4 id="132-confirming-kernel-module-loading">1.3.2 Confirming Kernel Module Loading</h4>
<p>Once hardware support is confirmed, we must ensure the Linux kernel has loaded the <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> modules. The <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> system consists of a core module (<code>kvm.ko</code>) and a processor-specific module (<code>kvm_intel.ko</code> or <code>kvm_amd.ko</code>). We use <code>lsmod</code> to list loaded modules:</p>
<div class="codehilite"><pre><span></span><code>lsmod<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>kvm
<span class="c1"># Expected Output: Should list '<a class="glossary-term" href="glossary.html#KVM">kvm<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a>' and either 'kvm_intel' or 'kvm_amd'</span>
</code></pre></div>
<p>If these modules are not present, they can often be loaded manually using <code>modprobe kvm_intel</code> (or <code>amd</code>), provided the hardware support is active.</p>
<h4 id="133-verifying-access-permissions">1.3.3 Verifying Access Permissions</h4>
<p>Security is a critical aspect of <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>. The kernel interface for creating VMs, located at <code>/dev/kvm</code>, is restricted. Standard users cannot access this device by default. To allow a user to run VMs without root privileges (a security best practice), the user must be added to the specialized <code>kvm</code> group.</p>
<div class="codehilite"><pre><span></span><code>ls<span class="w"> </span>-l<span class="w"> </span>/dev/kvm
<span class="c1"># Shows ownership, typically root:<a class="glossary-term" href="glossary.html#KVM">kvm<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> with permissions crw-rw----</span>
</code></pre></div>
<p>If you encounter a "Permission Denied" error when running <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>, verify your group membership using the <code>groups</code> command. If the <code>kvm</code> group is missing, you must add your user to it (<code>sudo usermod -aG kvm $USER</code>) and log out/in to apply the changes.</p>
<h4 id="134-troubleshooting-common-failures">1.3.4 Troubleshooting Common Failures</h4>
<p>You may encounter specific error messages during this verification process.</p>
<ul>
<li><strong>"<a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a>: disabled by BIOS"</strong>: This message explicitly states that while the CPU supports <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>, the feature is turned off in the computer's firmware. This cannot be fixed from within the OS; a physical reboot is required to modify BIOS settings.</li>
<li><strong>"<a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> support not available"</strong>: This often occurs when trying to run <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> inside another <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> (e.g., a cloud VPS) that does not support Nested <a class="glossary-term" href="glossary.html#Virtualization">Virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>. In this scenario, the "outer" <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> has not passed the hardware extensions through to your "inner" guest.</li>
</ul>
<h3 id="14-the-hardware-qemu-quick-emulator">1.4 The Hardware: <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> (Quick Emulator)</h3>
<p>While <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> enables the kernel to execute instructions, it does not provide the "Computer." It is the role of <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> to provide the motherboard, the chipset, the PCI bus, and the plugged-in devices. Without <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>, <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> is just a fast calculator; with <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>, it becomes a server.</p>
<h4 id="141-the-threading-architecture">1.4.1 The Threading Architecture</h4>
<p>To the Host Linux Kernel, a running <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> is purely a standard user-space process (<code>qemu-system-x86_64</code>) that happens to be multi-threaded. It does not look different from a web browser or database server from the scheduler's perspective. The architecture relies on three distinct thread types. The <strong>Main Loop (iothread)</strong> is a single thread running a glib-based event loop responsible for non-blocking tasks, such as handling the <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> Monitor (management interface), updating VNC/SPICE displays, and dispatching general I/O events. Parallel to this are the <strong><a class="glossary-term" href="glossary.html#vCPU">vCPU<span class="glossary-tooltip">Virtual CPU - Portion of physical CPU allocated to a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> Threads</strong>; for every Virtual CPU core assigned to the guest, <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> spawns a dedicated POSIX thread (<code>pthread</code>) that enters the <code>KVM_RUN</code> ioctl loop to execute guest code on the physical CPU. Finally, heavy I/O operations, such as writing large blocks to a disk image, are offloaded to a pool of <strong>Worker Threads</strong>. This asynchronous design prevents the main loop or <a class="glossary-term" href="glossary.html#vCPU">vCPU<span class="glossary-tooltip">Virtual CPU - Portion of physical CPU allocated to a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> threads from blocking (freezing) while waiting for slow physical storage.</p>
<h4 id="142-defining-the-virtual-motherboard">1.4.2 Defining the Virtual Motherboard</h4>
<p>When you configure a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> in <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>, you are actually selecting arguments for the <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> binary, starting with the Machine Type.</p>
<div class="codehilite"><pre><span></span><code>-machine<span class="w"> </span>pc-q35-8.1,accel<span class="o">=</span>kvm
</code></pre></div>
<p>This single line defines the fundamental architecture of the virtual motherboard. The <code>pc-q35</code> argument selects the modern Q35 chipset, which provides support for PCIe native handling and Secure Boot, as opposed to the legacy <code>i440fx</code> type which mimics a 1996-era PC. Crucially, the <code>accel=kvm</code> flag explicitly links the <em>Emulator</em> (<a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>) to the <em>Engine</em> (<a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a>). Without this flag, <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> would default to "TCG" (Tiny Code Generator), a software-only mode that interprets every instruction, resulting in agonizingly slow performance.</p>
<h4 id="143-constructing-the-processor-topology">1.4.3 Constructing the Processor Topology</h4>
<p><a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> allows granular control over how the CPU is presented to the <a class="glossary-term" href="glossary.html#Guest-OS">guest OS<span class="glossary-tooltip">The operating system running inside a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>. This is critical for licensing (some software is licensed per-socket) and performance (aligning with physical NUMA nodes).</p>
<div class="codehilite"><pre><span></span><code>-smp<span class="w"> </span><span class="m">4</span>,sockets<span class="o">=</span><span class="m">1</span>,cores<span class="o">=</span><span class="m">4</span>,threads<span class="o">=</span><span class="m">1</span>
</code></pre></div>
<p>This argument creates a topology of 1 Socket with 4 Cores. The <a class="glossary-term" href="glossary.html#Guest-OS">Guest OS<span class="glossary-tooltip">The operating system running inside a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> sees this exactly as if it were physical silicon.</p>
<h4 id="144-device-emulation-frontend-vs-backend">1.4.4 Device Emulation: Frontend vs Backend</h4>
<p>In <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>, every device is composed of two parts: the <strong>Frontend</strong> (what the <a class="glossary-term" href="glossary.html#Guest-OS">Guest OS<span class="glossary-tooltip">The operating system running inside a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> sees) and the <strong>Backend</strong> (how the Host handles the data).</p>
<div class="codehilite"><pre><span></span><code>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span>/dev/pve/vm-100-disk-0,format<span class="o">=</span>raw,if<span class="o">=</span>virtio<span class="w">  </span><span class="c1"># Backend &amp; Frontend</span>
-netdev<span class="w"> </span>tap,id<span class="o">=</span>net0,ifname<span class="o">=</span>tap100i0<span class="w">                      </span><span class="c1"># Network Backend</span>
-device<span class="w"> </span>virtio-net-pci,netdev<span class="o">=</span>net0<span class="w">                       </span><span class="c1"># Network Frontend</span>
</code></pre></div>
<p>The <strong>Backend</strong> (defined by <code>-netdev</code> or <code>-drive</code>) refers to the host-side resource, such as connecting to a Linux <a class="glossary-term" href="glossary.html#Bridge">Bridge<span class="glossary-tooltip">Network device connecting network segments 📖</span><span class="glossary-icon">📚</span></a> (<code>tap100i0</code>) or a disk image file. <em>(Note: The concept of the Linux <a class="glossary-term" href="glossary.html#Bridge">Bridge<span class="glossary-tooltip">Network device connecting network segments 📖</span><span class="glossary-icon">📚</span></a> and how it connects VMs to the physical network will be discussed in depth in the Network Chapter in Week 4.)</em> The <strong>Frontend</strong> (defined by <code>-device</code>) creates the virtual hardware that appears on the guest's PCI bus, such as a "VirtIO Network Card". The <a class="glossary-term" href="glossary.html#Guest-OS">guest OS<span class="glossary-tooltip">The operating system running inside a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> writes data to the Frontend device, and <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> is responsible for passing that data to the polling Backend.</p>
<h3 id="15-optimization-virtio-paravirtualization">1.5 Optimization: VirtIO (Paravirtualization)</h3>
<p>Emulating physical hardware (like an Intel E1000 network card) is "expensive" because every packet sent requires a context switch (<a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> Exit) to write to device registers, which <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> then has to decode and simulate.</p>
<p><strong>The Solution: VirtIO</strong>
VirtIO replaces full hardware emulation with a standardized "Paravirtualized" architecture. In this model, the <a class="glossary-term" href="glossary.html#Guest-OS">Guest OS<span class="glossary-tooltip">The operating system running inside a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> is aware that it is running in a virtual environment. Instead of trapping and emulating legacy hardware registers (which is slow), the Guest uses a specialized <code>virtio</code> driver to communicate directly with the Host via a shared memory interface.</p>
<p><strong>Mechanism (The Ring Buffer)</strong>:
The core of VirtIO's performance is the <strong>Virtqueue</strong>, implemented as a circular ring buffer in shared memory. The process begins with <strong>Shared Memory</strong>, where <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> allocates a region of RAM that is mapped into the address spaces of both the Host and the Guest. When the Guest needs to send data (e.g., a network packet), it initiates a <strong>vRing Operation</strong> by placing a descriptor pointer into the vRing buffer. Subsequently, the Guest performs a <strong>Kick Notification</strong>—a lightweight signal (via <code>ioeventfd</code>)—to alert the Host that new data is available. Finally, the Host performs <strong>Zero-Copy Processing</strong> by reading the data directly from the shared memory without needing to simulate a physical device operation, processing it, and placing a response back in the ring. This architecture bypasses the context-switching overhead inherent in traditional emulation.</p>
<p><em>Note: This is why you must select "VirtIO" for Network and Disk in <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> when performance matters.</em></p>
<h3 id="16-essential-command-reference">1.6 Essential Command Reference</h3>
<p>While <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> handles these automatically, knowing the underlying commands is useful for debugging and "deep dive" understanding. The following commands are provided for reference and theoretical understanding; you will have the opportunity to execute them and observe their output directly in this week's Lab exercises.</p>
<h4 id="161-disk-management-qemu-img">1.6.1 Disk Management (<a class="glossary-term" href="glossary.html#QEMU">qemu<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>-img)</h4>
<p>The <code>qemu-img</code> utility handles <a class="glossary-term" href="glossary.html#Virtual-Disk">virtual disk<span class="glossary-tooltip">A file that appears as a physical disk to a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> creation and manipulation. To create a new disk, the <code>create</code> subcommand is used, specifying the format (typically <code>qcow2</code> for thin provisioning) and the size. For example, <code>qemu-img create -f qcow2 mydisk.qcow2 20G</code>. To inspect an existing disk's virtual size and actual disk usage, the <code>info</code> command provides detailed metadata. Furthermore, the <code>convert</code> subcommand interacts with the format translation engine, allowing administrators to transform a generic <code>.img</code> image into a VMware <code>.vmdk</code> or <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> <code>.qcow2</code> image.</p>
<h4 id="162-vm-execution-qemu-system-x86_64">1.6.2 <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> Execution (<a class="glossary-term" href="glossary.html#QEMU">qemu<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a>-system-x86_64)</h4>
<p>Launching a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> manually involves the <code>qemu-system-x86_64</code> binary. A basic invocation usually requires defining the hard drive (<code>-hda</code>), the allocated RAM (<code>-m</code>), and crucially, the <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> accelerator (<code>-enable-kvm</code> or <code>-accel kvm</code>). For booting from an installer ISO, the <code>-cdrom</code> flag is added, often accompanied by <code>-boot d</code> to prioritize the optical drive in the boot order.</p>
<h3 id="section-1-checkpoint">Section 1 Checkpoint</h3>
<p><strong>Summary</strong>:</p>
<ul>
<li><strong><a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a></strong>: The kernel module that handles CPU execution (Guest Mode).</li>
<li><strong><a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a></strong>: The process that provides virtual hardware (Disks, NICs).</li>
<li><strong>VirtIO</strong>: Special drivers that bypass emulation for speed.</li>
</ul>
<p><strong>Reflection</strong>:</p>
<ul>
<li>Why does <code>top</code> on the host show a <code>qemu-kvm</code> process using 100% CPU if the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> is busy?</li>
<li>What is the difference between "Full Emulation" and "Paravirtualization"?</li>
</ul>
<p><strong>Resources</strong>:</p>
<ul>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtualization_deployment_and_administration_guide/chap-kvm_architecture">Red Hat: KVM Architecture</a></li>
</ul>
<hr/>
<h2 id="2-the-platform-proxmox-ve">2. The Platform: <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE</h2>
<p>To understand <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE, one must first understand its relationship with the underlying technologies. If <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> is the <strong>engine</strong> that powers <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> is the <strong>chassis</strong> that constructs the virtual hardware, then <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE acts as the <strong>dashboard and control center</strong>. While it is technically possible to manage <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> directly via the command line, this approach is granular, tedious, and unscalable for production environments. <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE solves this by serving as an <a class="glossary-term" href="glossary.html#Orchestration">orchestration<span class="glossary-tooltip">Automated coordination of systems 📖</span><span class="glossary-icon">📚</span></a> layer; it automates the complex <code>qemu</code> commands and kernel interactions, wrapping them in a cohesive, enterprise-grade management platform that provides visibility, clustering, and backup capabilities which the raw tools lack on their own.</p>
<h3 id="21-architectural-breakdown">2.1 Architectural Breakdown</h3>
<p><img alt="Proxmox VE Structure" src="images/proxmox_ve_layers.png"/>
<em>Figure 2.1: <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE Architecture - Decoupling the Web Interface, <a class="glossary-term" href="glossary.html#API">API<span class="glossary-tooltip">Application Programming Interface 📖</span><span class="glossary-icon">📚</span></a>, and Core <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> Engine.</em></p>
<p>As illustrated in <strong>Figure 2.1</strong>, <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE is designed as a layered interaction model. It is not a monolithic black box, but a collection of distinct services working in harmony.</p>
<h4 id="211-the-management-layer-top">2.1.1 The Management Layer (Top)</h4>
<p>This layer facilitates all human-to-machine interaction and is driven by several key daemons. The <strong>pveproxy</strong> service acts as the primary "front door," listening on port 8006 and serving the web interface via a secure HTTP server; it forwards valid requests to the internal <a class="glossary-term" href="glossary.html#API">API<span class="glossary-tooltip">Application Programming Interface 📖</span><span class="glossary-icon">📚</span></a> (pvedaemon). For console access, <strong>spiceproxy</strong> and <strong>vncterm</strong> handle the streaming of graphical display data from VMs to the browser. The <strong>pvedaemon</strong> (PVE <a class="glossary-term" href="glossary.html#API">API<span class="glossary-tooltip">Application Programming Interface 📖</span><span class="glossary-icon">📚</span></a> Daemon) is the worker background process that actually executes privileged tasks; whether triggered by the <a class="glossary-term" href="glossary.html#JSON">JSON<span class="glossary-tooltip">JavaScript Object Notation - Data format 📖</span><span class="glossary-icon">📚</span></a>-based Web GUI, the <strong>pvesh</strong> <a class="glossary-term" href="glossary.html#CLI">CLI<span class="glossary-tooltip">Command Line Interface 📖</span><span class="glossary-icon">📚</span></a> tool, or an external script, all roads lead to this daemon, ensuring a consistent execution path for every command. This layer also enforces <strong>User Authentication</strong>, validating credentials against configurable realms (PAM, LDAP, AD) before granting access.</p>
<h4 id="212-the-cluster-layer-middle">2.1.2 The <a class="glossary-term" href="glossary.html#Cluster">Cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a> Layer (Middle)</h4>
<p>Invisible to the user, a suite of daemons maintains the <a class="glossary-term" href="glossary.html#Cluster">cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a>'s brain. <strong><a class="glossary-term" href="glossary.html#Corosync">Corosync<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Cluster">Cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a> engine for group communication 📖</span><span class="glossary-icon">📚</span></a></strong> is the foundational <a class="glossary-term" href="glossary.html#Cluster">cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a> engine, providing the reliable, low-latency communication required to maintain <a class="glossary-term" href="glossary.html#Quorum">quorum<span class="glossary-tooltip">Minimum nodes needed for <a class="glossary-term" href="glossary.html#Cluster">cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a> to function 📖</span><span class="glossary-icon">📚</span></a> (node consensus). Data consistency is handled by <strong>pmxcfs</strong> (<a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> <a class="glossary-term" href="glossary.html#Cluster">Cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a> File System), a database-driven filesystem that instantly replicates configuration files in <code>/etc/pve</code> to all nodes. Monitoring is the responsibility of <strong>pvestatd</strong> (PVE Status Daemon), which queries the status of VMs, containers, and storage every 10 seconds to update the management layer. Finally, the <a class="glossary-term" href="glossary.html#High-Availability">High Availability<span class="glossary-tooltip">System design for minimal downtime (99.9%+ uptime) 📖</span><span class="glossary-icon">📚</span></a> (<a class="glossary-term" href="glossary.html#HA">HA<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#High-Availability">High Availability<span class="glossary-tooltip">System design for minimal downtime (99.9%+ uptime) 📖</span><span class="glossary-icon">📚</span></a> - System design for minimal downtime 📖</span><span class="glossary-icon">📚</span></a>) stack consists of two critical components: the <strong>pve-<a class="glossary-term" href="glossary.html#HA">ha<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#High-Availability">High Availability<span class="glossary-tooltip">System design for minimal downtime (99.9%+ uptime) 📖</span><span class="glossary-icon">📚</span></a> - System design for minimal downtime 📖</span><span class="glossary-icon">📚</span></a>-crm</strong> (<a class="glossary-term" href="glossary.html#Cluster">Cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a> Resource Manager), which decides <em>where</em> a service should run, and the <strong>pve-<a class="glossary-term" href="glossary.html#HA">ha<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#High-Availability">High Availability<span class="glossary-tooltip">System design for minimal downtime (99.9%+ uptime) 📖</span><span class="glossary-icon">📚</span></a> - System design for minimal downtime 📖</span><span class="glossary-icon">📚</span></a>-lrm</strong> (Local Resource Manager), which watches services on the local node and reports their state to the CRM, ensuring rapid recovery if a node fails.</p>
<h4 id="213-the-resource-layer-bottom">2.1.3 The Resource Layer (Bottom)</h4>
<p>This is where the actual work happens, overseen by the <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> Kernel. For full <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>, the <strong><a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a></strong> kernel module turns the Linux kernel into a <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>, while <strong><a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a></strong> processes utilize this to run guest operating systems. For lightweight <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a>, <strong><a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a></strong> (Linux Containers) enables kernel-shared environments, supported by <strong>lxcfs</strong>, a userspace filesystem that provides containers with virtualized views of <code>/proc</code> files (like CPU and memory stats) so they don't see the host's full resources. <strong>Storage Plugins</strong> simplify disk management by translating abstract requests ("create disk") into specific backend commands (e.g., <code>zfs create</code> or <code>rbd create</code>). Similarly, the <strong>pve-firewall</strong> service generates 'iptables' rules dynamically for each guest, creating isolated security zones (Interfaces/Bridges) at the kernel level.</p>
<h3 id="22-key-components">2.2 Key Components</h3>
<p><a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE is not a single application but a suite of integrated components. Understanding how these distinct parts—the interface, storage backends, and clustering services—fit together is essential for designing a resilient infrastructure. Although the architecture is layered, the daily operational experience revolves around extensive interaction with the following key subsystems.</p>
<h4 id="221-web-interface-gui">2.2.1 Web Interface (GUI)</h4>
<p><img alt="Proxmox VE Web Interface" src="images/proxmox_gui.png"/>
<em>Figure 2.2: The <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> VE Web Interface (GUI) providing a centralized view of the datacenter.</em></p>
<p>The primary management point is the web-based Graphical User Interface, accessible via port <code>8006</code>. It abstracts the complexity of <code>qemu</code> command lines and configuration files, allowing administrators to create VMs, manage storage pools, and configure software-defined networking bridges with visual feedback.</p>
<p>The interface organizes these capabilities into four distinct regions. At the top, the <strong>Header</strong> provides critical status information and action buttons for system-wide operations. To the left, the <strong>Resource Tree</strong> acts as the main navigation hub, allowing you to select specific objects such as nodes, VMs, or storage pools. The center region contains the <strong>Content Panel</strong>, which dynamically updates to show the configuration options and status for whichever object is selected in the tree. Finally, the <strong>Log Panel</strong> resides at the bottom, creating a real-time audit trail of recent tasks; administrators can double-click these entries to view detailed execution logs or abort running operations.</p>
<h4 id="222-storage-backends">2.2.2 Storage Backends</h4>
<p><a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> decouples compute from storage to facilitate flexibility across different environments. For standalone setups, administrators often utilize <strong>Local Storage</strong> such as <a class="glossary-term" href="glossary.html#LVM">LVM<span class="glossary-tooltip">Logical Volume Manager - Flexible disk management 📖</span><span class="glossary-icon">📚</span></a>-Thin or <a class="glossary-term" href="glossary.html#ZFS">ZFS<span class="glossary-tooltip">Advanced file system with volume management 📖</span><span class="glossary-icon">📚</span></a>, which support advanced features like instant snapshots. In clustered environments, the platform leverages <strong>Network Storage</strong> (<a class="glossary-term" href="glossary.html#NFS">NFS<span class="glossary-tooltip">Network File System - Remote file access protocol 📖</span><span class="glossary-icon">📚</span></a>, <a class="glossary-term" href="glossary.html#iSCSI">iSCSI<span class="glossary-tooltip">Internet SCSI - Block storage over IP networks 📖</span><span class="glossary-icon">📚</span></a>, or SMB) to enable <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> mobility and <a class="glossary-term" href="glossary.html#Live-Migration">Live Migration<span class="glossary-tooltip">Moving a running <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> between hosts without downtime 📖</span><span class="glossary-icon">📚</span></a>. Furthermore, <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> supports <strong>Hyper-Converged</strong> infrastructure through native integration with <a class="glossary-term" href="glossary.html#Ceph">Ceph<span class="glossary-tooltip">Distributed storage system for object/block/file storage 📖</span><span class="glossary-icon">📚</span></a>, a distributed object store that runs directly on the nodes themselves, eliminating the need for expensive external SAN hardware.</p>
<h3 id="section-2-checkpoint">Section 2 Checkpoint</h3>
<p><strong>Summary</strong>:</p>
<ul>
<li><strong>Architecture</strong>: Web UI -&gt; <a class="glossary-term" href="glossary.html#API">API<span class="glossary-tooltip">Application Programming Interface 📖</span><span class="glossary-icon">📚</span></a> -&gt; <a class="glossary-term" href="glossary.html#Corosync">Corosync<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Cluster">Cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a> engine for group communication 📖</span><span class="glossary-icon">📚</span></a>/pmxcfs -&gt; Kernel/<a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a>.</li>
<li><strong>pmxcfs</strong>: The magic filesystem that keeps <a class="glossary-term" href="glossary.html#Cluster">cluster<span class="glossary-tooltip">Group of servers working together 📖</span><span class="glossary-icon">📚</span></a> configs in sync.</li>
<li><strong>Storage</strong>: Decoupled from compute to allow flexibility (Local vs Shared).</li>
</ul>
<p><strong>Reflection</strong>:</p>
<ul>
<li>Why is an <a class="glossary-term" href="glossary.html#API">API<span class="glossary-tooltip">Application Programming Interface 📖</span><span class="glossary-icon">📚</span></a>-first design better for automation?</li>
<li>If <code>pmxcfs</code> replicates configs, what happens if you lose network connectivity between nodes?</li>
</ul>
<hr/>
<h2 id="3-vm-management-features">3. <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> Management Features</h2>
<h3 id="31-cloning">3.1 Cloning</h3>
<p>Cloning is the process of creating a new <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> based on the state of an existing one. <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> offers two distinct methods suited for different use cases.</p>
<h4 id="311-full-clone">3.1.1 Full <a class="glossary-term" href="glossary.html#Clone">Clone<span class="glossary-tooltip">An exact copy of a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a></h4>
<p>A Full <a class="glossary-term" href="glossary.html#Clone">Clone<span class="glossary-tooltip">An exact copy of a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> is a complete, independent copy of the original <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>. The system performs a block-by-block copy of the source disk image to a new file. Since it duplicates all data, it consumes significant time and storage space. However, its complete isolation makes it ideal for production deployments, as the new <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> has no dependency on the original.</p>
<h4 id="312-linked-clone">3.1.2 Linked <a class="glossary-term" href="glossary.html#Clone">Clone<span class="glossary-tooltip">An exact copy of a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a></h4>
<p>A Linked <a class="glossary-term" href="glossary.html#Clone">Clone<span class="glossary-tooltip">An exact copy of a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> uses a "Copy-on-Write" mechanism. It does not copy the original disk; instead, it creates a new delta file that references the original "Base" disk. The new <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> reads from the Base disk but writes changes to its own small delta file. This allows for near-instant creation and minimal storage usage, making it perfect for efficient testing or classroom labs. However, it introduces a critical dependency: the Base disk cannot be deleted without breaking all Linked Clones.</p>
<p><img alt="Full Clone vs Linked Clone" src="images/full_vs_linked_clone.png"/>
<em>Figure 3.1: Full Clones copy data; Linked Clones reference data.</em></p>
<h3 id="32-snapshots">3.2 Snapshots</h3>
<p>A <a class="glossary-term" href="glossary.html#Snapshot">snapshot<span class="glossary-tooltip">Point-in-time copy of <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> state for rollback 📖</span><span class="glossary-icon">📚</span></a> preserves the state of a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> at a specific point in time. Unlike a backup, which is a copy of data, a <a class="glossary-term" href="glossary.html#Snapshot">snapshot<span class="glossary-tooltip">Point-in-time copy of <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> state for rollback 📖</span><span class="glossary-icon">📚</span></a> is a freeze-frame of the disk and memory state.</p>
<h4 id="321-use-cases-and-mechanism">3.2.1 Use Cases and Mechanism</h4>
<p>Snapshots are primarily used as a safety net before performing risky operations, such as major OS upgrades or testing unstable software. If the operation fails, the administrator can perform a "Rollback" to revert the system state exactly to the moment the <a class="glossary-term" href="glossary.html#Snapshot">snapshot<span class="glossary-tooltip">Point-in-time copy of <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> state for rollback 📖</span><span class="glossary-icon">📚</span></a> was taken.</p>
<h4 id="322-the-snapshot-process">3.2.2 The <a class="glossary-term" href="glossary.html#Snapshot">Snapshot<span class="glossary-tooltip">Point-in-time copy of <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> state for rollback 📖</span><span class="glossary-icon">📚</span></a> Process</h4>
<p>When a <a class="glossary-term" href="glossary.html#Snapshot">snapshot<span class="glossary-tooltip">Point-in-time copy of <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> state for rollback 📖</span><span class="glossary-icon">📚</span></a> is taken in <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> (specifically on <a class="glossary-term" href="glossary.html#qcow2">QCOW2<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#QEMU">QEMU<span class="glossary-tooltip">Quick Emulator - Works with <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> for <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> Copy-On-Write disk image format 📖</span><span class="glossary-icon">📚</span></a> or <a class="glossary-term" href="glossary.html#ZFS">ZFS<span class="glossary-tooltip">Advanced file system with volume management 📖</span><span class="glossary-icon">📚</span></a> storage), the system marks the current data blocks as read-only. Any new writes are diverted to new blocks. If basic disk snapshotting is selected, only the disk state is saved (crash-consistent). If "Include RAM" is selected, the entire contents of the running memory are dumped to disk. This allows the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> to be restored to a running state, preserving open applications and processes, though it takes longer to complete.</p>
<h3 id="33-console-access">3.3 Console Access</h3>
<p>Accessing the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>'s display is handled via remote desktop protocols integrated into the browser.</p>
<h4 id="331-novnc">3.3.1 NoVNC</h4>
<p>NoVNC is the default HTML5-based console. It requires no plugins and renders the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>'s display directly in any modern web browser using WebSockets. It is lightweight and universally compatible but has limited support for clipboard integration and audio forwarding.</p>
<h4 id="332-spice-simple-protocol-for-independent-computing-environments">3.3.2 SPICE (Simple Protocol for Independent Computing Environments)</h4>
<p>For a richer desktop experience, <a class="glossary-term" href="glossary.html#Proxmox">Proxmox<span class="glossary-tooltip">Open-source <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> platform combining <a class="glossary-term" href="glossary.html#KVM">KVM<span class="glossary-tooltip">Kernel-based <a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A <a class="glossary-term" glossary.html#hypervisor"="" href="glossary.html#Type-1-&lt;a href=">Hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a>" class="glossary-term"&gt;Type 1 <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a><span class="glossary-tooltip">A bare-metal <a class="glossary-term" href="glossary.html#Hypervisor">hypervisor<span class="glossary-tooltip">Software that creates and manages virtual machines 📖</span><span class="glossary-icon">📚</span></a> that runs directly on hardware 📖</span><span class="glossary-icon">📚</span> 📖</span><span class="glossary-icon">📚</span></a> and <a class="glossary-term" href="glossary.html#LXC">LXC<span class="glossary-tooltip">Linux Containers - OS-level <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> supports SPICE. This protocol offers advanced features such as high-quality audio streaming, multi-monitor support, and USB device redirection (plugging a USB drive into your client and having it appear in the <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>). However, unlike NoVNC, SPICE requires a dedicated client viewer software (<code>virt-viewer</code>) to be installed on the user's machine.</p>
<h3 id="section-3-checkpoint">Section 3 Checkpoint</h3>
<p><strong>Summary</strong>:</p>
<ul>
<li><strong>Cloning</strong>: Full (Performance/Isolation) vs Linked (Speed/Space).</li>
<li><strong>Snapshots</strong>: "Save Game" state before risky changes. Not a backup!</li>
<li><strong>Consoles</strong>: NoVNC is convenient (browser-based), SPICE is powerful (requires client).</li>
</ul>
<p><strong>Reflection</strong>:</p>
<ul>
<li>Why should you delete a Linked <a class="glossary-term" href="glossary.html#Clone">Clone<span class="glossary-tooltip">An exact copy of a <a class="glossary-term" href="glossary.html#Virtual-Machine">virtual machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> if you delete the Parent?</li>
<li>Does a <a class="glossary-term" href="glossary.html#Snapshot">snapshot<span class="glossary-tooltip">Point-in-time copy of <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> state for rollback 📖</span><span class="glossary-icon">📚</span></a> consume disk space? If so, when?</li>
</ul>
<p><strong>Resources</strong>:</p>
<ul>
<li><a href="https://pve.proxmox.com/wiki/Live_Snapshots">Proxmox VE: Live Snapshots</a></li>
</ul>
<hr/>
<h2 id="4-summary-and-next-steps">4. Summary and Next Steps</h2>
<p>This week we peeled back the layers of <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> to reveal the mechanism inside. You learned that a "<a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a>" is not a magical black box, but simply a standard Linux process (<code>kvm</code>) managed by the kernel. You discovered that vCPUs are just threads scheduled by CFS, and vRAM is just memory allocated via <code>mmap()</code>. Finally, you mastered the art of tuning this engine—balancing resources to ensure stability—and explored the management features that make <a class="glossary-term" href="glossary.html#Virtualization">virtualization<span class="glossary-tooltip">The creation of virtual versions of physical computing resources 📖</span><span class="glossary-icon">📚</span></a> so powerful.</p>
<h3 id="preparing-for-week-3">Preparing for Week 3</h3>
<p>Next week, we go deeper into the infrastructure. We will explore <strong>Virtual Networking Fundamentals</strong>. Since you now know that a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> is just a process, it's time to understand how to wire these processes together using Linux Bridges, veth pairs, and VLANs.</p>
<p><strong>Checklist:</strong></p>
<ul>
<li>Can you explain what happens during a "<a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> Exit"?</li>
<li>Do you understand why a <a class="glossary-term" href="glossary.html#vCPU">vCPU<span class="glossary-tooltip">Virtual CPU - Portion of physical CPU allocated to a <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> 📖</span><span class="glossary-icon">📚</span></a> is treated like a Chrome tab by the scheduler?</li>
<li>Have you successfully SSH'd into your new Ubuntu Server?</li>
</ul>
<hr/>
<h2 id="5-lab-exercises">5. Lab Exercises</h2>
<ul>
<li><strong><a href="Week_2_Lab_1_Virtualization_Basics.html">Lab 1: KVM Virtualization Fundamentals</a></strong><ul>
<li><strong>Part A</strong>: Verification &amp; Preparation (Hardware/Disks).</li>
<li><strong>Part B</strong>: Launching &amp; Logging In (<a class="glossary-term" href="glossary.html#CLI">CLI<span class="glossary-tooltip">Command Line Interface 📖</span><span class="glossary-icon">📚</span></a> <a class="glossary-term" href="glossary.html#VM">VM<span class="glossary-tooltip"><a class="glossary-term" href="glossary.html#Virtual-Machine">Virtual Machine<span class="glossary-tooltip">A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> - A software-based emulation of a physical computer 📖</span><span class="glossary-icon">📚</span></a> Boot).</li>
</ul>
</li>
<li><strong><a href="Week_2_Lab_2_Managing_VMs.html">Lab 2: Proxmox VM Management</a></strong><ul>
<li><strong>Goal</strong>: Deploy Ubuntu VMs, install Guest Agents, and perform Snapshots/Cloning.</li>
</ul>
</li>
</ul>
<p><a href="../index.html">← Back to Course Index</a></p>
<div class="mt-12 p-8 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 text-center">
<h3 class="text-2xl font-bold text-[var(--text-headings)] mb-4">Test Your Knowledge</h3>
<p class="text-[var(--text-body)] mb-6">Ready to check your understanding of this week's material? Take the interactive quiz now!</p>
<a class="inline-block px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors shadow-md no-underline" href="Week_2_Quiz.html" id="start-quiz-btn">
                        Start Quiz
                    </a>
</div>
</article>
</main>
<!-- Footer -->
<footer class="text-center text-slate-500 dark:text-slate-400 text-sm pb-8">
</footer>
<!-- Progress Tracking -->
<script src="../js/course_logic.js"></script>
</body>
</html>
