<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 11 Quiz - OPS3</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3a5f 0%, #142a46 100%);
            color: #ffffff;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(30, 58, 95, 0.6);
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        header h1 {
            font-size: 2.5em;
            color: #c9984a;
            margin-bottom: 10px;
        }
        
        .quiz-setup {
            background: rgba(30, 58, 95, 0.6);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #c9984a;
        }
        
        .quiz-setup label {
            display: block;
            font-size: 1.2em;
            color: #c9984a;
            margin-bottom: 10px;
        }
        
        .quiz-setup select {
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #c9984a;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            margin-bottom: 20px;
        }
        
        .start-btn {
            width: 100%;
            padding: 15px;
            background: #c9984a;
            color: #1e3a5f;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .start-btn:hover {
            background: #ffffff;
            transform: scale(1.02);
        }
        
        .quiz-container {
            display: none;
        }
        
        .quiz-container.active {
            display: block;
        }
        
        .question-card {
            background: rgba(30, 58, 95, 0.6);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #c9984a;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .question-number {
            background: #c9984a;
            color: #1e3a5f;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .question-type {
            background: rgba(201, 152, 74, 0.3);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            color: #c9984a;
        }
        
        .question-text {
            font-size: 1.2em;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .command-prompt {
            background: #0f0f0f;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #c9984a;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            color: #a8dadc;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .option {
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(201, 152, 74, 0.3);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option:hover {
            background: rgba(201, 152, 74, 0.2);
            border-color: #c9984a;
            transform: translateX(5px);
        }
        
        .option.selected {
            background: rgba(201, 152, 74, 0.3);
            border-color: #c9984a;
        }
        
        .option.correct {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4caf50;
        }
        
        .option.incorrect {
            background: rgba(244, 67, 54, 0.3);
            border-color: #f44336;
        }
        
        .fill-input {
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #c9984a;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-family: 'Courier New', monospace;
        }
        
        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: rgba(201, 152, 74, 0.1);
            border-left: 4px solid #c9984a;
            border-radius: 5px;
            display: none;
        }
        
        .explanation.show {
            display: block;
        }
        
        .explanation strong {
            color: #c9984a;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .nav-btn {
            padding: 12px 30px;
            background: rgba(201, 152, 74, 0.3);
            color: #c9984a;
            border: 2px solid #c9984a;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-btn:hover {
            background: #c9984a;
            color: #1e3a5f;
        }
        
        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .results {
            background: rgba(30, 58, 95, 0.6);
            padding: 40px;
            border-radius: 15px;
            border: 3px solid #c9984a;
            text-align: center;
            display: none;
        }
        
        .results.show {
            display: block;
        }
        
        .score {
            font-size: 4em;
            color: #c9984a;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .grade {
            font-size: 2em;
            margin: 20px 0;
        }
        
        .attempts-left {
            background: rgba(201, 152, 74, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 1.1em;
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#c9984a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg> Week 11 Quiz</h1>
            <p>OPS3 - Virtualization and Cloud Infrastructure</p>
        </header>
        
        <!-- Quiz Setup -->
        <div class="quiz-setup" id="quizSetup">
            <h2 style="color: #c9984a; margin-bottom: 20px;">Quiz Settings</h2>
            <label for="attempts">Select Maximum Attempts:</label>
            <select id="attempts">
                <option value="1">1 Attempt</option>
                <option value="2">2 Attempts</option>
                <option value="3" selected>3 Attempts (Recommended)</option>
            </select>
            
            <div style="background: rgba(201, 152, 74, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <p><strong style="color: #c9984a;">Quiz Format:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>15 randomized questions per attempt</li>
                    <li>Mix of scenarios, fill-in-blanks, and commands</li>
                    <li>New questions generated each retry</li>
                    <li>Passing score: 70%</li>
                </ul>
            </div>
            
            <button class="start-btn" onclick="startQuiz()"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#c9984a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-2"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path><path d="M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"></path><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path></svg> Start Quiz</button>
        </div>
        
        <!-- Quiz Questions -->
        <div class="quiz-container" id="quizContainer">
            <div id="questionsArea"></div>
            
            <div class="navigation">
                <button class="nav-btn" onclick="previousQuestion()" id="prevBtn">← Previous</button>
                <button class="nav-btn" onclick="nextQuestion()" id="nextBtn">Next →</button>
                <button class="nav-btn" onclick="submitQuiz()" id="submitBtn" style="display: none;">✓ Submit Quiz</button>
            </div>
        </div>
        
        <!-- Results -->
        <div class="results" id="results">
            <h2 style="color: #c9984a;">Quiz Results</h2>
            <div class="score" id="scoreDisplay"></div>
            <div class="grade" id="gradeDisplay"></div>
            <div id="attemptsInfo"></div>
            <button class="start-btn" onclick="retryQuiz()" id="retryBtn" style="margin-top: 20px;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#002F6E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-2"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg> Retry Quiz</button>
            <a href="../index.html" class="nav-btn" style="display: inline-block; margin-top: 20px; text-decoration: none;">← Back to Course</a>
        </div>
    </div>
    
    <script>
        // Quiz data will be embedded here
        const quizData = {
            "scenario": [
                        {
                                    "question": "You need to automate deployment of 100 identical servers with specific configurations. Which tool is best for this?",
                                    "options": [
                                                "Manual scripting",
                                                "Ansible",
                                                "GUI",
                                                "SSH loops"
                                    ],
                                    "answer": "Ansible",
                                    "explanation": "Ansible provides declarative automation for configuration management at scale."
                        },
                        {
                                    "question": "Your application needs to programmatically create VMs in OpenStack. What should you use?",
                                    "options": [
                                                "Horizon dashboard",
                                                "OpenStack CLI",
                                                "OpenStack API",
                                                "Manual processes"
                                    ],
                                    "answer": "OpenStack API",
                                    "explanation": "APIs provide programmatic access for automation and integration."
                        },
                        {
                                    "question": "Which format is commonly used for Ansible playbooks and API responses?",
                                    "options": [
                                                "XML",
                                                "JSON/YAML",
                                                "CSV",
                                                "HTML"
                                    ],
                                    "answer": "JSON/YAML",
                                    "explanation": "YAML is used for Ansible playbooks, while JSON is common for API data exchange."
                        }
            ],
            "fill_blank": [
                        {
                                    "question": "_______ is an automation tool that uses YAML playbooks for configuration management.",
                                    "answer": "Ansible",
                                    "alternatives": [
                                                "ansible"
                                    ],
                                    "explanation": "Ansible automates IT infrastructure using simple, readable playbooks."
                        },
                        {
                                    "question": "_______ as Code is the practice of managing infrastructure through machine-readable files.",
                                    "answer": "Infrastructure",
                                    "alternatives": [
                                                "IaC"
                                    ],
                                    "explanation": "IaC treats infrastructure configuration as code for version control and automation."
                        },
                        {
                                    "question": "A _______ API uses HTTP methods like GET, POST, PUT, and DELETE for operations.",
                                    "answer": "REST",
                                    "alternatives": [
                                                "rest",
                                                "RESTful"
                                    ],
                                    "explanation": "REST (Representational State Transfer) APIs use standard HTTP methods."
                        }
            ],
            "command": [
                        {
                                    "question": "Complete the Ansible command to run a playbook:",
                                    "prompt": "ansible-playbook _______",
                                    "answer": "site.yml",
                                    "alternatives": [
                                                "playbook.yml",
                                                "deploy.yml"
                                    ],
                                    "explanation": "ansible-playbook executes the specified YAML playbook file."
                        },
                        {
                                    "question": "Complete the curl command to GET data from an API:",
                                    "prompt": "curl -X _______ https://api.example.com/resource",
                                    "answer": "GET",
                                    "explanation": "GET is the HTTP method for retrieving data from APIs."
                        }
            ]
};
        
        let currentAttempt = 1;
        let maxAttempts = 3;
        let currentQuestion = 0;
        let questions = [];
        let userAnswers = [];
        let score = 0;
        
        function generateQuestions() {
            questions = [];
            userAnswers = [];
            
            // Get all questions and shuffle
            let allQuestions = [];
            
            // Add scenario questions
            if (quizData.scenario) {
                quizData.scenario.forEach(q => {
                    allQuestions.push({...q, type: 'scenario'});
                });
            }
            
            // Add fill-in-blank questions
            if (quizData.fill_blank) {
                quizData.fill_blank.forEach(q => {
                    allQuestions.push({...q, type: 'fill_blank'});
                });
            }
            
            // Add command completion questions
            if (quizData.command) {
                quizData.command.forEach(q => {
                    allQuestions.push({...q, type: 'command'});
                });
            }
            
            // Shuffle and select 15 questions
            allQuestions = shuffleArray(allQuestions);
            questions = allQuestions.slice(0, 15);
            
            // Initialize answers array
            userAnswers = new Array(questions.length).fill(null);
        }
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function startQuiz() {
            maxAttempts = parseInt(document.getElementById('attempts').value);
            generateQuestions();
            
            document.getElementById('quizSetup').style.display = 'none';
            document.getElementById('quizContainer').classList.add('active');
            
            renderQuestions();
            showQuestion(0);
        }
        
        function renderQuestions() {
            const area = document.getElementById('questionsArea');
            area.innerHTML = '';
            
            questions.forEach((q, index) => {
                const qDiv = document.createElement('div');
                qDiv.className = 'question-card';
                qDiv.id = `question-${index}`;
                qDiv.style.display = 'none';
                
                let typeLabel = '';
                if (q.type === 'scenario') typeLabel = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#c9984a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-1"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg> Scenario';
                else if (q.type === 'fill_blank') typeLabel = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#c9984a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-1"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg> Fill in the Blank';
                else if (q.type === 'command') typeLabel = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#c9984a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-1"><rect x="2" y="4" width="20" height="16" rx="2" ry="2"></rect><line x1="6" y1="8" x2="6" y2="8"></line><line x1="10" y1="8" x2="10" y2="8"></line><line x1="14" y1="8" x2="14" y2="8"></line><line x1="18" y1="8" x2="18" y2="8"></line><line x1="6" y1="12" x2="6" y2="12"></line><line x1="10" y1="12" x2="10" y2="12"></line><line x1="14" y1="12" x2="14" y2="12"></line><line x1="18" y1="12" x2="18" y2="12"></line><line x1="6" y1="16" x2="18" y2="16"></line></svg> Command Completion';
                
                let content = `
                    <div class="question-header">
                        <span class="question-number">Question ${index + 1} of ${questions.length}</span>
                        <span class="question-type">${typeLabel}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
                `;
                
                if (q.type === 'scenario') {
                    content += '<div class="options">';
                    q.options.forEach((opt, i) => {
                        content += `
                            <div class="option" onclick="selectOption(${index}, '${opt}')">
                                ${String.fromCharCode(65 + i)}. ${opt}
                            </div>
                        `;
                    });
                    content += '</div>';
                } else if (q.type === 'fill_blank') {
                    content += `
                        <input type="text" class="fill-input" id="answer-${index}" 
                               placeholder="Type your answer..." onchange="saveAnswer(${index}, this.value)">
                    `;
                } else if (q.type === 'command') {
                    content += `
                        <div class="command-prompt">${q.prompt}</div>
                        <input type="text" class="fill-input" id="answer-${index}" 
                               placeholder="Complete the command..." onchange="saveAnswer(${index}, this.value)">
                    `;
                }
                
                content += `
                    <div class="explanation" id="explanation-${index}">
                        <strong>Explanation:</strong> ${q.explanation}
                    </div>
                `;
                
                qDiv.innerHTML = content;
                area.appendChild(qDiv);
            });
        }
        
        function showQuestion(index) {
            // Hide all questions
            questions.forEach((_, i) => {
                document.getElementById(`question-${i}`).style.display = 'none';
            });
            
            // Show current question
            document.getElementById(`question-${index}`).style.display = 'block';
            currentQuestion = index;
            
            // Update navigation
            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').style.display = index < questions.length - 1 ? 'block' : 'none';
            document.getElementById('submitBtn').style.display = index === questions.length - 1 ? 'block' : 'none';
        }
        
        function selectOption(qIndex, answer) {
            userAnswers[qIndex] = answer;
            
            // Update UI
            const options = document.getElementById(`question-${qIndex}`).querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('selected');
                if (opt.textContent.includes(answer)) {
                    opt.classList.add('selected');
                }
            });
        }
        
        function saveAnswer(qIndex, answer) {
            userAnswers[qIndex] = answer.trim();
        }
        
        function previousQuestion() {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        }
        
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                showQuestion(currentQuestion + 1);
            }
        }
        
        function submitQuiz() {
            calculateScore();
            document.getElementById('quizContainer').classList.remove('active');
            showResults();
        }
        
        function calculateScore() {
            score = 0;
            
            questions.forEach((q, i) => {
                const userAnswer = userAnswers[i];
                let isCorrect = false;
                
                if (q.type === 'scenario') {
                    isCorrect = userAnswer === q.answer;
                } else {
                    // For fill-in and command, check against answer and alternatives
                    const validAnswers = [q.answer];
                    if (q.alternatives) {
                        validAnswers.push(...q.alternatives);
                    }
                    isCorrect = validAnswers.some(ans => 
                        ans.toLowerCase() === (userAnswer || '').toLowerCase()
                    );
                }
                
                if (isCorrect) score++;
                
                // Show explanation and mark answer
                const qCard = document.getElementById(`question-${i}`);
                if (q.type === 'scenario') {
                    const options = qCard.querySelectorAll('.option');
                    options.forEach(opt => {
                        if (opt.textContent.includes(q.answer)) {
                            opt.classList.add('correct');
                        } else if (opt.textContent.includes(userAnswer) && !isCorrect) {
                            opt.classList.add('incorrect');
                        }
                    });
                }
                
                document.getElementById(`explanation-${i}`).classList.add('show');
            });
        }
        
        function showResults() {
            const percentage = Math.round((score / questions.length) * 100);
            document.getElementById('scoreDisplay').textContent = `${score}/${questions.length}`;
            
            let grade = '';
            if (percentage >= 90) grade = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#c9984a" stroke="#c9984a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-1"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg> Excellent!';
            else if (percentage >= 80) grade = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#c9984a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-1"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path></svg> Great Job!';
            else if (percentage >= 70) grade = '✓ Passed';
            else grade = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#c9984a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-1"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> Keep Studying';
            
            document.getElementById('gradeDisplay').textContent = `${percentage}% - ${grade}`;
            
            const attemptsLeft = maxAttempts - currentAttempt;
            let attemptInfo = `<div class="attempts-left">`;
            attemptInfo += `<strong>Attempt ${currentAttempt} of ${maxAttempts}</strong><br>`;
            if (percentage < 70 && attemptsLeft > 0) {
                attemptInfo += `You have ${attemptsLeft} attempt(s) remaining. Click Retry to try again with new questions.`;
                document.getElementById('retryBtn').style.display = 'block';
            } else if (attemptsLeft === 0 && percentage < 70) {
                attemptInfo += `No attempts remaining. Please review the material and try again later.`;
                document.getElementById('retryBtn').style.display = 'none';
            } else {
                attemptInfo += `Congratulations! You passed the quiz.`;
                document.getElementById('retryBtn').style.display = 'none';
            }
            attemptInfo += `</div>`;
            
            document.getElementById('attemptsInfo').innerHTML = attemptInfo;
            document.getElementById('results').classList.add('show');
        }
        
        function retryQuiz() {
            if (currentAttempt < maxAttempts) {
                currentAttempt++;
                document.getElementById('results').classList.remove('show');
                generateQuestions();
                renderQuestions();
                currentQuestion = 0;
                showQuestion(0);
                document.getElementById('quizContainer').classList.add('active');
            }
        }
    </script>
</body>
</html>
